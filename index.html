// ...existing code...
<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calendario settimanale</title>
  <style>
    :root{
      --bg:#0d6efd; /* blu */
      --card:#ffffff;
      --muted:#6c757d;
      --accent:#0747d1;
    }
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:#111}
    .wrap{max-width:1200px;margin:32px auto;padding:20px}
    header{color:#fff;text-align:center;margin-bottom:16px}
    h1{margin:0;font-size:1.6rem}
    .week{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:14px;
    }
    @media (max-width:900px){ .week{grid-template-columns:repeat(2,1fr);} }
    @media (max-width:480px){ .week{grid-template-columns:1fr;} }
    .day{
      background:var(--card);
      border-radius:10px;
      padding:12px;
      box-shadow:0 6px 18px rgba(0,0,0,0.12);
      display:flex;
      flex-direction:column;
      min-height:170px;
    }
    .day-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .day-name{font-weight:600;color:var(--accent)}
    .day-number{
      background:var(--bg);
      color:#fff;
      width:36px;height:36px;
      display:flex;align-items:center;justify-content:center;
      border-radius:6px;font-weight:700;
      box-shadow:inset 0 -2px 0 rgba(0,0,0,0.12);
    }
    .notes{
      margin-top:6px;flex:1;display:flex;flex-direction:column;
    }
    textarea{
      resize:vertical;min-height:80px;max-height:300px;
      border:1px solid #e6e6e6;border-radius:6px;padding:8px;font-family:inherit;
      font-size:0.95rem;flex:1;
    }
    .muted{font-size:0.85rem;color:var(--muted)}
    .saved{font-size:0.8rem;color:green;margin-top:6px;display:none}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Calendario settimanale</h1>
      <div class="muted" id="week-range"></div>
    </header>

    <main class="week" id="week">
      <!-- Giorni inseriti via JS -->
    </main>
  </div>

  <script>
    // genera la settimana (lunedì → domenica)
    const weekEl = document.getElementById('week');
    const rangeEl = document.getElementById('week-range');
    const dayNames = ['Lunedì','Martedì','Mercoledì','Giovedì','Venerdì','Sabato','Domenica'];

    function startOfWeek(date){
      // ritorna lunedì della settimana del date
      const d = new Date(date.getFullYear(), date.getMonth(), date.getDate());
      const day = (d.getDay() + 6) % 7; // 0 = Monday
      d.setDate(d.getDate() - day);
      return d;
    }

    function formatYMD(d){
      return d.toISOString().slice(0,10);
    }

    function formatShort(d){
      return d.getDate() + '/' + (d.getMonth()+1);
    }

    function renderWeek(today=new Date()){
      weekEl.innerHTML = '';
      const monday = startOfWeek(today);
      const sunday = new Date(monday); sunday.setDate(monday.getDate()+6);
      rangeEl.textContent = formatShort(monday) + ' — ' + formatShort(sunday);

      for(let i=0;i<7;i++){
        const dt = new Date(monday); dt.setDate(monday.getDate()+i);
        const key = 'note-'+formatYMD(dt);
        const saved = localStorage.getItem(key) || '';
        const isToday = formatYMD(dt) === formatYMD(new Date());

        const dayCard = document.createElement('section');
        dayCard.className = 'day';
        dayCard.innerHTML = `
          <div class="day-header">
            <div>
              <div class="day-name">${dayNames[i]}</div>
              <div class="muted">${dt.toLocaleDateString()}</div>
            </div>
            <div class="day-number" title="${dt.toLocaleDateString()}">${dt.getDate()}</div>
          </div>
          <div class="notes">
            <textarea id="${key}" placeholder="Scrivi una nota..."></textarea>
            <div class="saved" id="saved-${key}">Salvato</div>
          </div>
        `;
        if(isToday){
          dayCard.style.outline = '3px solid rgba(255,255,255,0.12)';
        }
        weekEl.appendChild(dayCard);

        const ta = dayCard.querySelector('textarea');
        const savedEl = dayCard.querySelector('.saved');
        ta.value = saved;
        let timeout;
        ta.addEventListener('input', () => {
          localStorage.setItem(key, ta.value);
          savedEl.style.display = 'inline';
          clearTimeout(timeout);
          timeout = setTimeout(()=> savedEl.style.display = 'none', 1200);
        });
      }
    }

    renderWeek();
  </script>
</body>
</html>
// ...existing code...